<!-- The Main Outer Box -->
<mat-card class = "main-card">
    <div class = "content-div">
        <!-- Card that shows members detail -->
        <mat-card class = "detail-view-card sub-card" >
            <!-- The header: Photo and name -->
            <div id="parent">
                <div id="wide">
                    <div *ngIf="downloadURL | async; let url">
                        <img [src]="url" alt="Image from AngularFireStorage" style="display:block;margin:auto;max-width:120px;max-height:120px;width: auto;height: auto;border:1px solid black;">
                    </div>
                </div>
                <div id="narrow" style="border:1px solid black;">
                    <br>
                    <div style="font-size: x-large;text-align: center" *ngIf="this.userInView" >   {{this.userInView.name}}         <div style="font-weight: normal;font-size: small;"> {{this.userInView.email}} </div>  </div>
                    <br>
                    <div *ngIf="this.userInView" style="font-size: small;text-align: center" >     Joined:    Date joined  </div>
                </div>
            </div>

            <!-- Details -->
            <mat-card class="details-card">
                <br>
                Events Attended:
                <br>
                <table style="width:100%; border: 1px solid black;">
                    <tr>
                        <td>
                            Event Date
                        </td>
                        <td>
                            Event Title
                        </td>
                        <td>
                            Event Location
                        </td>
                    </tr>
                </table>   
                <table style="width:100%; border: 1px dotted black;">
                        <tr>
                            <td>
                                Event Date
                            </td>
                            <td>
                                Event Title
                            </td>
                            <td>
                                Event Location
                            </td>
                        </tr>
                        <tr>
                                <td>
                                    Event Date
                                </td>
                                <td>
                                    Event Title
                                </td>
                                <td>
                                    Event Location
                                </td>
                            </tr>
                    </table>
            </mat-card>
            
            <!-- Options -->
            <!-- <div *ngIf="Admin | async"> -->
            <div *ngIf="Admin | async">

                    <mat-card class="option-buttons-card">
                            <!-- If the this.userInView is in this.members, show "Make this member an admin button" -->
                            <button *ngIf="this.members && this.members.indexOf(this.userInView) >= 0" (click)="confirmMakeAdmin()"> Make this member an admin </button>
                            <button *ngIf="this.members && this.members.indexOf(this.userInView) >= 0" (click)="confirmRemoveMember()" style="background-color: #EE310C ">Remove their membership</button>
                            <button *ngIf="this.admins && this.admins.indexOf(this.userInView) >= 0" (click)="confirmDemoteAdmin()"> Demote this admin to member</button>
            
                        </mat-card>
            </div>
           
        </mat-card>

        <!-- The card that contains search, options and lists -->
        <mat-card class = "list-view-card sub-card">
            
            <!-- The search box -->
            <input class="form-control serach-bar-text-area" type="text" name="search" [(ngModel)]="searchText" (ngModelChange)="updateInDisplay()" autocomplete="off" placeholder="Search People in this Org">
            
            <!-- Make admin and invite options -->
            <mat-card  *ngIf="Admin | async" class = 'grid-card'>
                <input #adminEmail type="text" placeholder="Search Admin Email">
                <br>
                <button (click)="confirmMakeAdmin(adminEmail.value)"> Make Admin </button>
            </mat-card>
            <mat-card *ngIf="Admin | async" class = 'grid-card'>
                <input #inviteEmail type="text" placeholder="Search Member Email"> 
                <br>
                <button (click)="confirmInviteMember(inviteEmail.value)" > Invite </button>
            </mat-card>


            <!-- Titles -->
            <mat-card class="title-cards grid-card">
                Admins
            </mat-card>
            <mat-card class="title-cards grid-card">
                Users
            </mat-card>

            <!-- lists -->
            <mat-card [ngStyle]="(Admin | async) && {'height': '285px'}" class = "list-card grid-card">
                <mat-grid-list cols="1" rowHeight="50px" gutterSize="3px" >
                    <mat-grid-tile *ngFor='let admin of adminsInDisplay'
                        (click)="handleUserClick(admin)"
                        [colspan]="1"
                        [rowspan]="1">
                        {{ admin.name }}
                    </mat-grid-tile>
                </mat-grid-list>
            </mat-card>
            <mat-card [ngStyle]="(Admin | async) && {'height': '285px'}" class = "list-card grid-card">
                <mat-grid-list cols="2" rowHeight="50px" gutterSize="3px" >
                    <mat-grid-tile *ngFor='let member of membersInDisplay'
                        (click)="handleUserClick(member)"
                        [colspan]="1"
                        [rowspan]="1">
                        {{ member.name }}
                    </mat-grid-tile>
                </mat-grid-list>
            </mat-card>
        </mat-card>
    </div>
</mat-card>

